<div ibmGrid class="bx--grid--full-width">
  <form #cfsView="ngForm">
    <div
      id="topPartPrint"
      ibmRow
      class="bx--offset-max-2 bx--offset-lg-3 bx--offset-xlg-2 pt-32"
    >
      <div ibmCol [columnNumbers]="{ lg: 16 }">
        <ibm-breadcrumb [noTrailingSlash]="true">
          <ibm-breadcrumb-item [current]="true" href="#1">
            Operation System
          </ibm-breadcrumb-item>
          <ibm-breadcrumb-item>
            <a routerLink="/operation-system/cfs-request-list"
              >Centralised Food Services</a
            >
          </ibm-breadcrumb-item>
          <ibm-breadcrumb-item [current]="true" href="#1">
            Request Form
          </ibm-breadcrumb-item>
        </ibm-breadcrumb>
      </div>
    </div>

    <div class="printable">
      <div class="logon-container">
        <div
          ibmRow
          class="bx--offset-max-2 bx--offset-xlg-2 bx--offset-lg-3 justify-content-center print-logo"
        >
          <div ibmCol [columnNumbers]="{ lg: 16, md: 16, sm: 16 }">
            <img src="./assets/images/ksb-logo-97.svg" alt="KSB logo" />
          </div>
        </div>
        <div
          ibmRow
          class="bx--offset-max-2 bx--offset-xlg-2 bx--offset-lg-3 justify-content-center mt-3 print-logo"
          style="margin-bottom: 2rem"
        >
          <div ibmCol [columnNumbers]="{ lg: 16, md: 16, sm: 16 }">
            <span class="ph02"
              >PANGKALAN BEKALAN KEMAMAN SDN. BHD. (69363-D)</span
            >
          </div>
        </div>
      </div>
      <div
        ibmRow
        class="bx--offset-max-2 bx--offset-lg-3 bx--offset-xlg-2 pt-24"
      >
        <div ibmCol [columnNumbers]="{ max: 16, xlg: 16, lg: 16 }" class="ph03">
          Request Form
        </div>
      </div>

      <div
        ibmRow
        class="bx--offset-max-2 bx--offset-lg-3 bx--offset-xlg-2 pt-24"
        [leftGutter]="false"
      >
        <div ibmCol [columnNumbers]="{ lg: 2 }" class="ph01">Company Name</div>
        <div ibmCol [columnNumbers]="{ lg: 6 }" class="bl01">
          {{ companyName }}
        </div>
      </div>

      <div
        ibmRow
        class="bx--offset-max-2 bx--offset-lg-3 bx--offset-xlg-2 pt-24"
        [leftGutter]="false"
      >
        <div ibmCol [columnNumbers]="{ lg: 2 }" class="ph01">Request By</div>
        <div ibmCol [columnNumbers]="{ lg: 6 }" class="bl01">
          {{ requestBy }}
        </div>
      </div>

      <div
        ibmRow
        class="bx--offset-max-2 bx--offset-lg-3 bx--offset-xlg-2 pt-24"
        [leftGutter]="false"
      >
        <div ibmCol [columnNumbers]="{ lg: 2 }" class="ph01">Form No.</div>
        <div ibmCol [columnNumbers]="{ lg: 6 }" class="bl01">
          {{ formNo }}
        </div>
      </div>

      <div
        ibmRow
        class="bx--offset-max-2 bx--offset-lg-3 bx--offset-xlg-2 pt-24"
        [leftGutter]="false"
      >
        <div ibmCol [columnNumbers]="{ lg: 2 }" class="ph01">Request Type</div>
        <div ibmCol [columnNumbers]="{ lg: 6 }" class="bl01">
          {{ requestType }}
        </div>
      </div>

      <div
        ibmRow
        class="bx--offset-max-2 bx--offset-lg-3 bx--offset-xlg-2 pt-24"
        [leftGutter]="false"
      >
        <div ibmCol [columnNumbers]="{ lg: 2 }" class="ph01">Booking Date</div>
        <div ibmCol [columnNumbers]="{ lg: 6 }" class="bl01">
          {{ bookingDate | date: "dd/MM/YYYY" }}
        </div>
      </div>

      <div
        ibmRow
        class="bx--offset-max-2 bx--offset-lg-3 bx--offset-xlg-2 pt-24"
        [leftGutter]="false"
      >
        <div ibmCol [columnNumbers]="{ lg: 2 }" class="ph01">Time</div>
        <div ibmCol [columnNumbers]="{ lg: 6 }" class="bl01">
          {{ bookingDate | date: "HH:mm" }}
        </div>
      </div>

      <div
        ibmRow
        class="bx--offset-max-2 bx--offset-lg-3 bx--offset-xlg-2 pt-24"
        [leftGutter]="false"
      >
        <div ibmCol [columnNumbers]="{ lg: 2 }" class="ph01">Location</div>
        <div ibmCol [columnNumbers]="{ lg: 6 }" class="bl01">
          {{ location }}
        </div>
      </div>

      <div
        ibmRow
        class="bx--offset-max-2 bx--offset-lg-3 bx--offset-xlg-2 pt-24"
        [leftGutter]="false"
      >
        <div ibmCol [columnNumbers]="{ lg: 2 }" class="ph01">Po No.</div>
        <div ibmCol [columnNumbers]="{ lg: 6 }" class="bl01">
          {{ poNumber }}
        </div>
      </div>

      <div
        ibmRow
        class="bx--offset-max-2 bx--offset-lg-3 bx--offset-xlg-2 pt-24"
        [leftGutter]="false"
      >
        <div ibmCol [columnNumbers]="{ lg: 2 }" class="ph01">Vessel Name</div>
        <div ibmCol [columnNumbers]="{ lg: 6 }" class="bl01">
          {{ vessel }}
        </div>
      </div>

      <div
        ibmRow
        class="bx--offset-max-2 bx--offset-lg-3 bx--offset-xlg-2 pt-24 page-break"
        [leftGutter]="false"
      >
        <div ibmCol [columnNumbers]="{ lg: 2 }" class="ph01">Status</div>
        <div ibmCol [columnNumbers]="{ lg: 6 }" class="bl01">
          
          <span
          [ngStyle]="{
            color: status.toLowerCase().includes('pending') ? 'red' : '#161616'
          }"
          >{{ status | titlecase }}
        </span>
        </div>
      </div>

      <div
        ibmRow
        class="bx--offset-max-2 bx--offset-xlg-2 bx--offset-lg-3 mt-24 d-flex"
      >
        <div
          ibmCol
          class="bx--offset-lg-2"
          style="padding-top: 1rem; padding-left: 0"
        >
          <button
            ibmButton="secondary"
            size="md"
            [disabled]="isCancelDisabled"
            *ngIf="isCancelDisplay"
            (click)="open = true"
          >
            Cancel Request
          </button>
        </div>
      </div>

      <br /><br />

      <div
        ibmRow
        class="bx--offset-max-2 bx--offset-xlg-2 bx--offset-lg-3"
        [leftGutter]="false"
        [rightGutter]="false"
        style="margin-top: 1rem"
        *ngIf="housekeepingDetails.length !== 0"
      >
        <div ibmCol [columnNumbers]="{ lg: 12 }">
          <h4 ibmTableHeaderTitle>
            Housekeeping, Cleaning and Stuffing Services Details
          </h4>
          <div class="form-item width-unset pt-24">
            <ibm-table-container>
              <div class="horizontal-overflow-table">
                <table class="bx--data-table">
                  <thead>
                    <tr>
                      <th class="header1">No.</th>
                      <th class="header2">Container No.</th>
                      <th class="header2">HouseKeeping</th>
                      <th class="header2">Cleaning</th>
                      <th class="header2">Stuffing</th>
                      <th class="header5">Remarks</th>
                    </tr>
                  </thead>

                  <tbody>
                    <tr
                      *ngIf="housekeepingDetails.length === 0"
                      [ngClass]="{ 'invalid-tableRow': goodsInTableInvalid }"
                    >
                      <td align="center" colspan="6">
                        No data is entered yet.
                      </td>
                    </tr>
                    <tr
                      *ngFor="
                        let rowDetails of housekeepingDetails;
                        let postIndex = index
                      "
                      class="white-bg"
                      [ngClass]="{ 'invalid-tableRow': goodsInTableInvalid }"
                    >
                      <!-- <tr class="white-bg"> -->
                      <td>{{ postIndex + 1 }}.</td>

                      <td>
                        {{ rowDetails.containerNo }}
                      </td>

                      <td>
                        {{ rowDetails.housekeeping }}
                      </td>

                      <td>
                        {{ rowDetails.cleaning }}
                      </td>

                      <td>
                        {{ rowDetails.stuffing }}
                      </td>

                      <td>
                        {{ rowDetails.remarks }}
                      </td>
                    </tr>
                  </tbody>
                </table>
              </div>
            </ibm-table-container>
          </div>
        </div>
      </div>

      <div
        ibmRow
        class="bx--offset-max-2 bx--offset-xlg-2 bx--offset-lg-3"
        [leftGutter]="false"
        [rightGutter]="false"
        style="margin-top: 1rem"
        *ngIf="loadingCablingDetails.length !== 0"
      >
        <div ibmCol [columnNumbers]="{ lg: 12 }">
          <h4 ibmTableHeaderTitle>Loading and Cabling Services Details</h4>
          <div class="form-item width-unset pt-24">
            <ibm-table-container>
              <div class="horizontal-overflow-table">
                <table class="bx--data-table">
                  <thead>
                    <tr>
                      <th class="header1">No.</th>
                      <th class="header2">Container No.</th>
                      <th class="header3">Type Container</th>
                      <th class="header4">Cabling on Vessel</th>
                      <th class="header5">4-Core</th>
                      <th class="header6">Remarks</th>
                    </tr>
                  </thead>

                  <tbody>
                    <tr
                      *ngIf="loadingCablingDetails.length === 0"
                      [ngClass]="{ 'invalid-tableRow': goodsInTableInvalid }"
                    >
                      <td align="center" colspan="6">
                        No data is entered yet.
                      </td>
                    </tr>
                    <tr
                      *ngFor="
                        let rowDetails of loadingCablingDetails;
                        let postIndex = index
                      "
                      class="white-bg"
                      [ngClass]="{ 'invalid-tableRow': goodsInTableInvalid }"
                    >
                      <!-- <tr class="white-bg"> -->
                      <td>{{ postIndex + 1 }}.</td>

                      <td>
                        {{ rowDetails.containerNo }}
                      </td>

                      <td>
                        {{ rowDetails.containerType }}
                      </td>

                      <td>
                        {{ rowDetails.cablingOnVessel }}
                      </td>

                      <td>
                        {{ rowDetails.fourCore }}
                      </td>

                      <td>
                        {{ rowDetails.remarks }}
                      </td>
                    </tr>
                  </tbody>
                </table>
              </div>
            </ibm-table-container>
          </div>
        </div>
      </div>

      <div
        ibmRow
        class="bx--offset-max-2 bx--offset-xlg-2 bx--offset-lg-3"
        [leftGutter]="false"
        [rightGutter]="false"
        style="margin-top: 1rem"
        *ngIf="plugOnOffDetails.length !== 0"
      >
        <div ibmCol [columnNumbers]="{ lg: 12 }">
          <h4 ibmTableHeaderTitle>
            Plug On/Off Food Container Services Details
          </h4>
          <div class="form-item width-unset pt-24">
            <ibm-table-container>
              <div class="horizontal-overflow-table">
                <table class="bx--data-table">
                  <thead>
                    <tr>
                      <th class="header1">No.</th>
                      <th class="header2">Container No.</th>
                      <th class="header3">Plug On</th>
                      <th class="header4">Plug Off</th>
                      <th class="header5">Remarks</th>
                    </tr>
                  </thead>

                  <tbody>
                    <tr
                      *ngIf="plugOnOffDetails.length === 0"
                      [ngClass]="{ 'invalid-tableRow': goodsInTableInvalid }"
                    >
                      <td align="center" colspan="6">
                        No data is entered yet.
                      </td>
                    </tr>
                    <tr
                      *ngFor="
                        let rowDetails of plugOnOffDetails;
                        let postIndex = index
                      "
                      class="white-bg"
                      [ngClass]="{ 'invalid-tableRow': goodsInTableInvalid }"
                    >
                      <!-- <tr class="white-bg"> -->
                      <td>{{ postIndex + 1 }}.</td>

                      <td>
                        {{ rowDetails.containerNo }}
                      </td>

                      <td>
                        {{ rowDetails.plugOn }}
                      </td>

                      <td>
                        {{ rowDetails.plugOff }}
                      </td>

                      <td>
                        {{ rowDetails.remarks }}
                      </td>
                    </tr>
                  </tbody>
                </table>
              </div>
            </ibm-table-container>
          </div>
        </div>
      </div>

      <div
        ibmRow
        class="bx--offset-max-2 bx--offset-xlg-2 bx--offset-lg-3"
        [leftGutter]="false"
        [rightGutter]="false"
        style="margin-top: 1rem"
        *ngIf="repairDetails.length !== 0"
      >
        <div ibmCol [columnNumbers]="{ lg: 12 }">
          <h4 ibmTableHeaderTitle>Repair Food Container Services Details</h4>
          <div class="form-item width-unset pt-24">
            <ibm-table-container>
              <div class="horizontal-overflow-table">
                <table class="bx--data-table">
                  <thead>
                    <tr>
                      <th class="header1">No.</th>
                      <th class="header2">Container No.</th>
                      <th class="header3">Repair Required</th>
                      <th class="header3">Repair Notes</th>
                      <th class="header3">Outside/Inside Bonded</th>
                      <th class="header5">Remarks</th>
                    </tr>
                  </thead>

                  <tbody>
                    <tr
                      *ngIf="repairDetails.length === 0"
                      [ngClass]="{ 'invalid-tableRow': goodsInTableInvalid }"
                    >
                      <td align="center" colspan="5">
                        No data is entered yet.
                      </td>
                    </tr>
                    <tr
                      *ngFor="
                        let rowDetails of repairDetails;
                        let postIndex = index
                      "
                      class="white-bg"
                      [ngClass]="{ 'invalid-tableRow': goodsInTableInvalid }"
                    >
                      <!-- <tr class="white-bg"> -->
                      <td>{{ postIndex + 1 }}.</td>

                      <td>
                        {{ rowDetails.containerNo }}
                      </td>

                      <td>
                        {{ rowDetails.repairRequired }}
                      </td>

                      <td>
                        {{ rowDetails.repair }}
                      </td>

                      <td>
                        {{ rowDetails.outsideInsideBonded }}
                      </td>

                      <td>
                        {{ rowDetails.remarks }}
                      </td>
                    </tr>
                  </tbody>
                </table>
              </div>
            </ibm-table-container>
          </div>
        </div>
      </div>

      <div
        ibmRow
        class="bx--offset-max-2 bx--offset-xlg-2 bx--offset-lg-3"
        [leftGutter]="false"
        [rightGutter]="false"
        style="margin-top: 1rem"
        *ngIf="storageDetail.length !== 0"
      >
        <div ibmCol [columnNumbers]="{ lg: 12 }">
          <h4 ibmTableHeaderTitle>
            Storage for Food Container Services Details
          </h4>
          <div class="form-item width-unset pt-24">
            <ibm-table-container>
              <div class="horizontal-overflow-table">
                <table class="bx--data-table">
                  <thead>
                    <tr>
                      <th class="header1">No.</th>
                      <th class="header2">Container No.</th>
                      <th class="header2">Container Type</th>
                      <th class="header5">Remarks</th>
                    </tr>
                  </thead>

                  <tbody>
                    <tr
                      *ngIf="storageDetail.length === 0"
                      [ngClass]="{ 'invalid-tableRow': goodsInTableInvalid }"
                    >
                      <td align="center" colspan="6">
                        No data is entered yet.
                      </td>
                    </tr>
                    <tr
                      *ngFor="
                        let rowDetails of storageDetail;
                        let postIndex = index
                      "
                      class="white-bg"
                      [ngClass]="{ 'invalid-tableRow': goodsInTableInvalid }"
                    >
                      <!-- <tr class="white-bg"> -->
                      <td>{{ postIndex + 1 }}.</td>

                      <td>
                        {{ rowDetails.containerNo }}
                      </td>

                      <td>
                        {{ rowDetails.containerType }}
                      </td>

                      <td>
                        {{ rowDetails.remarks }}
                      </td>
                    </tr>
                  </tbody>
                </table>
              </div>
            </ibm-table-container>
          </div>
        </div>
      </div>

      <div
        ibmRow
        class="bx--offset-max-2 bx--offset-xlg-2 bx--offset-lg-3"
        [leftGutter]="false"
        [rightGutter]="false"
        style="margin-top: 1rem"
        *ngIf="handlingFeeDetails.length !== 0"
      >
        <div ibmCol [columnNumbers]="{ lg: 12 }">
          <h4 ibmTableHeaderTitle>Handling Fee and Transport Details</h4>
          <div class="form-item width-unset pt-24">
            <ibm-table-container>
              <div class="horizontal-overflow-table">
                <table class="bx--data-table">
                  <thead>
                    <tr>
                      <th class="header1">No.</th>
                      <th class="header2">Container No.</th>
                      <th class="header5">Remarks</th>
                    </tr>
                  </thead>

                  <tbody>
                    <tr
                      *ngIf="handlingFeeDetails.length === 0"
                      [ngClass]="{ 'invalid-tableRow': goodsInTableInvalid }"
                    >
                      <td align="center" colspan="6">
                        No data is entered yet.
                      </td>
                    </tr>
                    <tr
                      *ngFor="
                        let rowDetails of handlingFeeDetails;
                        let postIndex = index
                      "
                      class="white-bg"
                      [ngClass]="{ 'invalid-tableRow': goodsInTableInvalid }"
                    >
                      <!-- <tr class="white-bg"> -->
                      <td>{{ postIndex + 1 }}.</td>

                      <td>
                        {{ rowDetails.containerNo }}
                      </td>

                      <td>
                        {{ rowDetails.remarks }}
                      </td>
                    </tr>
                  </tbody>
                </table>
              </div>
            </ibm-table-container>
          </div>
        </div>
      </div>
    </div>
    <br /><br />

    <div ibmRow class="bx--offset-max-2 bx--offset-xlg-2 bx--offset-lg-3 pt-32">
      <div
        ibmCol
        [columnNumbers]="{ lg: 12, md: 10, sm: 5 }"
        class="d-flex-row"
        style="justify-content: flex-start"
      >
        <button
          class="mr-24"
          ibmButton="secondary"
          type="button"
          size="md"
          (click)="redirectToPrevious()"
        >
          Back
        </button>
        <button
          class="mr-24"
          ibmButton="secondary"
          size="md"
          (click)="onPrint()"
        >
          Print
        </button>

        <button
          class="mr-24"
          ibmButton="secondary"
          size="md"
          *ngIf="isEditDisplay"
          [routerLink]="['/operation-system/cfs-request-form', formNo]"
        >
          Edit
        </button>

        <button
          class="mr-24"
          ibmButton="primary"
          size="md"
          *ngIf="isEndorseDisplay"
          (click)="openEndorsed = true"
        >
          Endorse
        </button>
      </div>
    </div>

    <ibm-modal [open]="open" size="sm" (overlaySelected)="open = false">
      <ibm-modal-header ibmModalHeaderHeading (closeSelect)="open = false">
        <h4 style="font-weight: bold">Confirmation</h4>
      </ibm-modal-header>
      <div ibmModalContent class="bx--modal-content">
        <h4>Are you sure you want to cancel this item?</h4>
      </div>
      <br /><br />

      <ibm-modal-footer>
        <ng-container>
          <button ibmButton="secondary" (click)="open = false">Cancel</button>
          <button
            ibmButton="primary"
            (click)="onCancel()"
            [attr.modal-primary-focus]="true"
          >
            Confirm
          </button>
        </ng-container>
      </ibm-modal-footer>
    </ibm-modal>

    <ibm-modal
      [open]="openEndorsed"
      size="sm"
      (overlaySelected)="openEndorsed = false"
    >
      <ibm-modal-header
        ibmModalHeaderHeading
        (closeSelect)="openEndorsed = false"
      >
        <h4 style="font-weight: bold">Confirmation</h4>
      </ibm-modal-header>
      <div ibmModalContent class="bx--modal-content">
        <h4>Are you sure you want to endorse?</h4>
        <h4>Kindly make sure all details are correct.</h4>
        <br /><br />
      </div>

      <ibm-modal-footer>
        <ng-container>
          <button ibmButton="secondary" (click)="openEndorsed = false">
            Cancel
          </button>
          <button
            ibmButton="primary"
            (click)="onEndorse()"
            [attr.modal-primary-focus]="true"
          >
            Confirm
          </button>
        </ng-container>
      </ibm-modal-footer>
    </ibm-modal>
  </form>
  <br />
  <br />
  <br />
  <br />
  <br />
  <br />
  <br />
</div>
