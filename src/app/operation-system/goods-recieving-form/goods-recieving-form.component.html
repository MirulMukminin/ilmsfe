<div ibmGrid class="bx--grid--full-width">
<form #recievingGoodsForm="ngForm" (ngSubmit)="onSubmit(recievingGoodsForm)">
  <div ibmRow class="bx--offset-max-2 bx--offset-lg-3 bx--offset-xlg-2 pt-32">
    <div ibmCol [columnNumbers]="{ lg: 16 }">
      <ibm-breadcrumb [noTrailingSlash]="true">
        <ibm-breadcrumb-item [current]="true" href="#1">
          Operation System
        </ibm-breadcrumb-item>
        <ibm-breadcrumb-item>
          <a
            style="text-decoration: none"
            [routerLink]="['/operation-system/goods-recieving-list']"
            >Goods Recieving</a
          >
        </ibm-breadcrumb-item>
        <ibm-breadcrumb-item [current]="true" href="#1">
          Request Form
        </ibm-breadcrumb-item>
      </ibm-breadcrumb>
    </div>
  </div>

  <div ibmRow class="bx--offset-max-2 bx--offset-lg-3 bx--offset-xlg-2 mt-32">
    <div ibmCol [columnNumbers]="{ max: 16, xlg: 16, lg: 16 }" class="ph03">
      Goods Recieving Request Form
    </div>
  </div>

  <div
    ibmRow
    class="bx--offset-max-2 bx--offset-lg-3 bx--offset-xlg-2 mt-32"
    [leftGutter]="false"
  >
    <div ibmCol [columnNumbers]="{ lg: 2 }" class="ph01">Requester Name</div>
    <div ibmCol [columnNumbers]="{ lg: 2 }" class="bl01">
      {{ customer.name }}
    </div>
    <div ibmCol [columnNumbers]="{ lg: 2 }" class="bl01">
       
    </div>
    <div ibmCol [columnNumbers]="{ lg: 2, md: 2, sm: 2 }" >
      <ibm-label
        
      >
        Request No
        <input
          ibmText
          placeholder="Request No"
          name="requestNo"
          [(ngModel)]="requestNo"
          required
          [invalid]="invalidReqName"
          (change)="inputValueChange($event)"
          #requestNoElement
          tabindex="1"
          disabled
        >
      </ibm-label>
    </div>
  </div>

  <div
    ibmRow
    class="bx--offset-max-2 bx--offset-lg-3 bx--offset-xlg-2 mt-32"
    [leftGutter]="false"
  >
    <div ibmCol [columnNumbers]="{ lg: 2 }" class="ph01">Customer</div>
    <div ibmCol [columnNumbers]="{ lg: 2 }" class="bl01">
      {{ companyName }}
    </div>
    <div ibmCol [columnNumbers]="{ lg: 2 }" class="bl01"></div>
    <div ibmCol [columnNumbers]="{ lg: 2, md: 2, sm: 2 }" >
      <ibm-label
        [invalid]="invalidReqName"
        invalidText="Requester Name is Required"
      >
        Status:
        <input
          ibmText
          placeholder="Status"
          name="reguestNo"
          [(ngModel)]="status"
          required
          [invalid]="invalidReqName"
          (change)="inputValueChange($event)"
          #reqNameElement
          tabindex="1"
          disabled
        >
      </ibm-label>
    </div>
  </div>

  <!-- Agent List-->
  <div
      ibmRow
      class="bx--offset-max-2 bx--offset-lg-3 bx--offset-xlg-2 mt-32"
      [leftGutter]="false"
    >
      <div ibmCol [columnNumbers]="{ lg: 3 }">
        <div class="form-item" #agentElement tabindex="2">
          <ibm-dropdown
            label="Agents"
            placeholder="Select"
            itemValueKey="content"
            [dropUp]="false"
            name="agents"
            [invalid]="agentInvalid"
            [invalidText]="agentInvalidText"
            required
            [(ngModel)]="agentName"
            (selected)="inputValueChange($event)"
          >
            <ibm-dropdown-list [items]="agentSelect"></ibm-dropdown-list>
          </ibm-dropdown>
        </div>
      </div>
  </div>

  <!--Requeser Name -->
  <div
      ibmRow
      class="bx--offset-max-2 bx--offset-lg-3 bx--offset-xlg-2 mt-32"
      [leftGutter]="false"
    >
      <div ibmCol [columnNumbers]="{ lg: 3, md: 3, sm: 3 }">
        <ibm-label
          [invalid]="invalidReqName"
          invalidText="Requester Name is Required"
        >
          Requester's Name
          <input
            ibmText
            placeholder="Requeser's Name"
            name="requesterName"
            [(ngModel)]="reqName"
            required
            [invalid]="invalidReqName"
            (change)="inputValueChange($event)"
            #reqNameElement
            tabindex="1"
          >
        </ibm-label>
      </div>
      
  </div>

  
  
  <!--Requester's IC -->
  <div
      ibmRow
      class="bx--offset-max-2 bx--offset-lg-3 bx--offset-xlg-2 mt-32"
      [leftGutter]="false"
    >
      <div ibmCol [columnNumbers]="{ lg: 3, md: 3, sm: 3 }">
        <ibm-label [invalid]="invalidReqIc" invalidText="Requester's Ic is Required">
          Requester's IC
          <input
            ibmText
            name="reqic"
            [(ngModel)]="reqIc"
            [invalid]="invalidReqIc"
            required
            (change)="inputValueChange($event)"
            #reqIcElement
            tabindex="2"
          />
        </ibm-label>
      </div>
  </div>

  <!--Requester's Phone -->
  <div
      ibmRow
      class="bx--offset-max-2 bx--offset-lg-3 bx--offset-xlg-2 mt-32"
      [leftGutter]="false"
    >
      <div ibmCol [columnNumbers]="{ lg: 3, md: 3, sm: 3 }">
        <ibm-label [invalid]="invalidReqPhone" invalidText="Requester's Phone is Required">
          Requester's Phone
          <input
            ibmText
            name="reqphone"
            [(ngModel)]="reqPhone"
            [invalid]="invalidReqPhone"
            required
            (change)="inputValueChange($event)"
            #reqPhoneElement
            tabindex="3"
          />
        </ibm-label>
      </div>
  </div>

  <!--Date Time-->
  <!--Date -->
  <div
      ibmRow
      class="bx--offset-max-2 bx--offset-lg-3 bx--offset-xlg-2 mt-32"
      [leftGutter]="false"
    >
      <div ibmCol [columnNumbers]="{ lg: 3, md: 3, sm: 3 }">
        <div #dateElement tabindex="4">
          <ibm-date-picker
            name="date"
            label="Date"
            [placeholder]="'Select Date'"
            size="md"
            [dateFormat]="'d/m/Y'"
            [invalid]="dateInvalid"
            [invalidText]="dateInvalidText"
            [(ngModel)]="date"
            (valueChange)="dateChange($event)"
          >
          </ibm-date-picker>
        </div>
      </div>
      <div ibmCol [columnNumbers]="{ lg: 2 }">
        <div class="form-item" #timeElement tabindex="5">
          <ibm-dropdown
            label="Time"
            placeholder="Select"
            itemValueKey="content"
            [dropUp]="false"
            name="time"
            [invalid]="timeInvalid"
            [invalidText]="timeInvalidText"
            required
            [(ngModel)]="time"
            (selected)="inputValueChange($event)"
          >
            <ibm-dropdown-list [items]="timeList"></ibm-dropdown-list>
          </ibm-dropdown>
        </div>
      </div>
  </div>


  <!-- Storage Location-->
  <div
      ibmRow
      class="bx--offset-max-2 bx--offset-lg-3 bx--offset-xlg-2 mt-32"
      [leftGutter]="false"
    >
      <div ibmCol [columnNumbers]="{ lg: 3 }">
        <div class="form-item" #storageLocationElement tabindex="6">
          <ibm-dropdown
            label="Storage Locations"
            placeholder="Select"
            itemValueKey="content"
            [dropUp]="false"
            name="storage-locations"
            [invalid]="storageLocationInvalid"
            [invalidText]="storageLocationInvalidText"
            required
            [(ngModel)]="storageLocationName"
            (selected)="inputValueChange($event)"
          >
            <ibm-dropdown-list [items]="storageLocationSelect"></ibm-dropdown-list>
          </ibm-dropdown>
        </div>
      </div>
  </div>

  <!--Storage/Rent Duration-->
  <div
      ibmRow
      class="bx--offset-max-2 bx--offset-lg-3 bx--offset-xlg-2 mt-32"
      [leftGutter]="false"
    >
      <div ibmCol [columnNumbers]="{ lg: 3 }">
        <div class="form-item" #storageDurationElement tabindex="6">
          <ibm-dropdown
            label="Storage Durations"
            placeholder="Select"
            itemValueKey="content"
            [dropUp]="false"
            name="storage-durations"
            [invalid]="storageDurationInvalid"
            [invalidText]="storageDurationInvalidText"
            required
            [(ngModel)]="storageDuration"
            (selected)="inputValueChange($event)"
          >
            <ibm-dropdown-list [items]="storageDurationList"></ibm-dropdown-list>
          </ibm-dropdown>
        </div>
      </div>
  </div>

  <!-- Allotment -->
  <div
      ibmRow
      class="bx--offset-max-2 bx--offset-lg-3 bx--offset-xlg-2 mt-32"
      [leftGutter]="false"
    >
      <div ibmCol [columnNumbers]="{ lg: 3, md: 3, sm: 3 }">
        <ibm-label [invalid]="invalidMhe" invalidText="Allotment No is Required">
         MHE
          <input
            ibmText
            name="allotment"
            [(ngModel)]="mhe"
            [invalid]="invalidMhe"
            required
            (change)="inputValueChange($event)"
            #mheElement
            tabindex="7"
          />
        </ibm-label>
      </div>
  </div>

  <!-- Table -->
  <div
      ibmRow
      class="bx--offset-max-2 bx--offset-xlg-2 bx--offset-lg-3"
      [leftGutter]="false"
      [rightGutter]="false"
    >
      <div ibmCol [columnNumbers]="{ lg: 12 }">
        <ibm-table-container style="margin-top: 4rem">
          <ibm-table-header>
            <h4>Items</h4>
            <p>Please add items in the table below.</p>
          </ibm-table-header>
          <ibm-table-toolbar >
            <div class="table-action">
              <div class="actions">
                <div class="del" *ngIf="checkSelected()">
                  <Button
                    ibmButton="primary"
                    size="sm"
                    type="button"
                    (click)="onClearItem()"
                  >
                    Clear
                    <div
                      class="icon-trashCan ml-16 mt-4"
                      ibmIcon="trash-can"
                      size="20"
                    ></div>
                  </Button>
                </div>
                <div class="cancel" *ngIf="checkSelected()">
                  <button
                    ibmButton="primary"
                    size="sm"
                    type="button"
                    (click)="onCancel()"
                  >
                    Cancel
                  </button>
                </div>
                <div class="cancel" *ngIf="checkSelected()">
                <button
                  ibmButton="primary"
                  size="sm"
                  type="button"
                  (click)="onDeleteItem()"
                >
                  <span style="margin-right: 42px">Delete Item</span>
                  <div class="icon-addAlt" ibmIcon="add--alt" size="20"></div>
                </button>
              </div>
                <button
                  ibmButton="primary"
                  size="sm"
                  type="button"
                  (click)="addItem()"
                >
                  <span style="margin-right: 42px">Add New Item</span>
                  <div class="icon-addAlt" ibmIcon="add--alt" size="20"></div>
                </button>
              </div>
            </div>
          </ibm-table-toolbar>
          <div class="">
            <table class="bx--data-table" #itemDetailTable tabindex="6">
              <thead>
                <tr>
                  <th class="bx--table-header-label">No.</th>
                  <th class="bx--table-header-label">Type of Item</th>
                  <th class="bx--table-header-label">Description</th>
                  <th class="bx--table-header-label">Qty</th>
                  <th class="bx--table-header-label" rowspan="2">Action</th>
                </tr>
              </thead>
              <tbody>
                <tr
                  *ngIf="itemList.length == 0"
                  [ngClass]="{ 'invalid-tableRow': externalItemTableInvalid }"
                >
                  <td align="center" colspan="10">
                    No data is entered yet. Please add new row
                  </td>
                </tr>

                <tr
                  *ngFor="let item of itemList; let itemIndex = index"
                  class="white-bg"
                >
                  <td>{{ itemIndex + 1 }}.</td>
                  <td> 
                    <ibm-dropdown
                      placeholder="Select"
                      itemValueKey="content"
                      [dropUp]="false"
                      [name]="'storage_location_' + itemIndex " 
                      [invalid]="item.invalidType"
                      #itemTypeElement
                      required
                      
                      [(ngModel)]="item.type"
                      (selected)="inputValueChange($event)"
                    >
                      <ibm-dropdown-list [items]="typeSelect"></ibm-dropdown-list>
                    </ibm-dropdown>
                  </td>
                  <td>
                    <ibm-label                      
                      ><input
                        ibmText
                        size="sm"
                        [name]="'description_' + itemIndex"
                        [(ngModel)]="item.description"
                        tabindex="6"
                        (change)="inputValueChange($event)"
                    /></ibm-label>
                  </td>
                  <td>
                    <ibm-label                      
                      ><input
                        ibmText
                        size="sm"
                        [name]="'qty_' + itemIndex"
                        [(ngModel)]="item.qty"
                        tabindex="6"
                        (change)="inputValueChange($event)"
                    /></ibm-label>
                  </td>  
                 
                  
                  <td>
                    <ibm-checkbox
                      [hideLabel]="true"
                      name="checkbox_{{ itemIndex }}"
                      (change)="onSelected($event, itemIndex)"
                      [checked]="item.selected"
                    ></ibm-checkbox>
                  </td>
                </tr>
              </tbody>
            </table>
          </div>
        </ibm-table-container>
      </div>
  </div>

  <!-- Buttons -->
  <div
      ibmRow
      class="bx--offset-max-2 bx--offset-xlg-2 bx--offset-lg-3"
      [leftGutter]="false"
      [rightGutter]="false"
    >
      <div
        ibmCol
        [columnNumbers]="{ lg: 12 }"
        class="d-flex-row pt-64"
        style="justify-content: flex-start"
      >
        <button
          ibmButton="secondary"
          class="mr-24"
          size="xl"
          routerLink="/operation-system/goods-recieving-list"
          type="button"
        >
          Cancel
        </button>
        <button
          ibmButton="secondary"
          class="mr-24"
          size="xl"
          type="button"
          (click)="onClear()"
        >
          Clear
        </button>

        <button ibmButton="primary" type="button" (click)="open = true">
          Submit
        </button>
      </div>
  </div>
  
    <ibm-modal [open]="open" size="sm" (overlaySelected)="open = false">
      <ibm-modal-header ibmModalHeaderHeading (closeSelect)="open = false">
        <h4 style="font-weight: bold">Confirmation</h4>
      </ibm-modal-header>
      <div ibmModalContent class="bx--modal-content">
        <h4>Are you sure you want to submit?</h4>
        <h4>Kindly make sure all details are correct.</h4>
        <br />
      </div>

      <ibm-modal-footer>
        <ng-container>
          
          <button ibmButton="secondary" (click)="open = false">Cancel</button>
          <button
            ibmButton="primary"
            type="submit"
            [attr.modal-primary-focus]="true"
          >
            Confirm
          </button>
        </ng-container>
      </ibm-modal-footer>
    </ibm-modal>

</form>
<br /><br /><br /><br />
</div>