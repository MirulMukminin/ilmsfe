<div class="printable">
  <div ibmGrid class="bx--grid--full-width page-break">
    <div
      ibmRow
      class="bx--offset-max-2 bx--offset-xlg-2 bx--offset-lg-3 justify-content-center"
    >
      <div ibmCol [columnNumbers]="{ lg: 16, md: 16, sm: 16 }">
        <img src="./assets/images/ksb-logo-97.svg" alt="KSB logo" />
      </div>
    </div>
    <div
      ibmRow
      class="bx--offset-max-2 bx--offset-xlg-2 bx--offset-lg-3 justify-content-center mt-3"
    >
      <div ibmCol [columnNumbers]="{ lg: 16, md: 16, sm: 16 }">
        <span class="ph02">PANGKALAN BEKALAN KEMAMAN SDN. BHD. (69363-D)</span>
      </div>
    </div>
    <div ibmRow class="bx--offset-max-2 bx--offset-xlg-2 bx--offset-lg-3 mt-64">
      <div ibmCol [columnNumbers]="{ lg: 16, md: 16, sm: 16 }">
        <span class="ph03">Supplies & Other Services</span>
      </div>
    </div>

    <div
      ibmRow
      class="bx--offset-max-2 bx--offset-xlg-2 bx--offset-lg-3 mt-24"
      [leftGutter]="false"
    >
      <div ibmCol [columnNumbers]="{ lg: 2, md: 2, sm: 2 }">
        <span class="ph01">Job Ticket No.</span>
      </div>
      <div ibmCol [columnNumbers]="{ lg: 5, md: 5, sm: 5 }">
        <span class="bl01">{{ jobTickeNo }}</span>
      </div>
    </div>

    <!-- <div
      ibmRow
      class="bx--offset-max-2 bx--offset-xlg-2 bx--offset-lg-3 mt-24"
      [leftGutter]="false"
    >
      <div ibmCol [columnNumbers]="{ lg: 2, md: 2, sm: 2 }">
        <span class="ph01">JR No.</span>
      </div>
      <div ibmCol [columnNumbers]="{ lg: 5, md: 5, sm: 5 }">
        <span class="bl01">{{ jrNo }}</span>
      </div>
    </div> -->

    <div
      ibmRow
      class="bx--offset-max-2 bx--offset-xlg-2 bx--offset-lg-3 mt-24"
      [leftGutter]="false"
    >
      <div ibmCol [columnNumbers]="{ lg: 2, md: 2, sm: 2 }">
        <span class="ph01">Location</span>
      </div>
      <div ibmCol [columnNumbers]="{ lg: 5, md: 5, sm: 5 }">
        <span class="bl01">{{ location }}</span>
      </div>
    </div>

    <div
      ibmRow
      class="bx--offset-max-2 bx--offset-xlg-2 bx--offset-lg-3 mt-24"
      [leftGutter]="false"
    >
      <div ibmCol [columnNumbers]="{ lg: 2, md: 2, sm: 2 }">
        <span class="ph01">Company Name</span>
      </div>
      <div ibmCol [columnNumbers]="{ lg: 5, md: 5, sm: 5 }">
        <span class="bl01">{{ company }}</span>
      </div>
    </div>

    <div
      ibmRow
      class="bx--offset-max-2 bx--offset-xlg-2 bx--offset-lg-3 mt-24"
      [leftGutter]="false"
    >
      <div ibmCol [columnNumbers]="{ lg: 2, md: 2, sm: 2 }">
        <span class="ph01">Request No.</span>
      </div>
      <div ibmCol [columnNumbers]="{ lg: 5, md: 5, sm: 5 }">
        <span class="bl01">{{ requestNo }}</span>
      </div>
    </div>

    <div
      ibmRow
      class="bx--offset-max-2 bx--offset-xlg-2 bx--offset-lg-3 mt-24"
      [leftGutter]="false"
    >
      <div ibmCol [columnNumbers]="{ lg: 2, md: 2, sm: 2 }">
        <span class="ph01">Supply To</span>
      </div>
      <div ibmCol [columnNumbers]="{ lg: 5, md: 5, sm: 5 }">
        <span class="bl01">{{ supplyTo }}</span>
      </div>
    </div>

    <div
      ibmRow
      class="bx--offset-max-2 bx--offset-xlg-2 bx--offset-lg-3 mt-24"
      [leftGutter]="false"
    >
      <div ibmCol [columnNumbers]="{ lg: 2, md: 2, sm: 2 }">
        <span class="ph01">Request By</span>
      </div>
      <div ibmCol [columnNumbers]="{ lg: 5, md: 5, sm: 5 }">
        <span class="bl01">{{ requestBy }}</span>
      </div>
    </div>

    <div
      ibmRow
      class="bx--offset-max-2 bx--offset-xlg-2 bx--offset-lg-3 mt-24"
      [leftGutter]="false"
    >
      <div ibmCol [columnNumbers]="{ lg: 2, md: 2, sm: 2 }">
        <span class="ph01">Request Date</span>
      </div>
      <div ibmCol [columnNumbers]="{ lg: 5, md: 5, sm: 5 }">
        <span class="bl01">{{ requestDate }}</span>
      </div>
    </div>

    <!-- <div
      ibmRow
      class="bx--offset-max-2 bx--offset-xlg-2 bx--offset-lg-3 mt-24"
      [leftGutter]="false"
    >
      <div ibmCol [columnNumbers]="{ lg: 2, md: 2, sm: 2 }">
        <span class="ph01">Request on Behalf</span>
      </div>
      <div ibmCol [columnNumbers]="{ lg: 5, md: 5, sm: 5 }">
        <span class="bl01">{{ requestOnBehalf }}</span>
      </div>
    </div> -->

    <div
      ibmRow
      class="bx--offset-max-2 bx--offset-xlg-2 bx--offset-lg-3 mt-24"
      [leftGutter]="false"
    >
      <div ibmCol [columnNumbers]="{ lg: 2, md: 2, sm: 2 }">
        <span class="ph01">PO No.</span>
      </div>
      <div ibmCol [columnNumbers]="{ lg: 5, md: 5, sm: 5 }">
        <span class="bl01">{{ poNumber }}</span>
      </div>
    </div>

    <div
      ibmRow
      class="bx--offset-max-2 bx--offset-xlg-2 bx--offset-lg-3 mt-24"
      [leftGutter]="false"
    >
      <div ibmCol [columnNumbers]="{ lg: 2, md: 2, sm: 2 }">
        <span class="ph01">Booking Date</span>
      </div>
      <div ibmCol [columnNumbers]="{ lg: 5, md: 5, sm: 5 }">
        <span class="bl01">{{ booking_date }}</span>
      </div>
    </div>

    <div
      ibmRow
      class="bx--offset-max-2 bx--offset-xlg-2 bx--offset-lg-3 mt-24"
      [leftGutter]="false"
    >
      <div ibmCol [columnNumbers]="{ lg: 2, md: 2, sm: 2 }">
        <span class="ph01">Status</span>
      </div>
      <div ibmCol [columnNumbers]="{ lg: 5, md: 5, sm: 5 }">
        <span
          class="bl01"
          [ngStyle]="{
            color: status.toLowerCase().includes('pending') ? 'red' : 'black'
          }"
          >{{ convertToTitleCase(status) }}</span
        >
      </div>
    </div>

    <div
      ibmRow
      class="bx--offset-max-2 bx--offset-xlg-2 bx--offset-lg-3 mt-24"
      [leftGutter]="false"
    >
      <div ibmCol [columnNumbers]="{ lg: 2, md: 2, sm: 2 }">
        <span class="ph01">Endorsed By</span>
      </div>
      <div ibmCol [columnNumbers]="{ lg: 5, md: 5, sm: 5 }">
        <span class="bl01">{{ convertToTitleCase(endorsedBy) }}</span>
      </div>
    </div>

    <div
      ibmRow
      class="bx--offset-max-2 bx--offset-xlg-2 bx--offset-lg-3 mt-24"
      [leftGutter]="false"
    >
      <div ibmCol [columnNumbers]="{ lg: 2, md: 2, sm: 2 }">
        <span class="ph01">Endorsed Date</span>
      </div>
      <div ibmCol [columnNumbers]="{ lg: 5, md: 5, sm: 5 }">
        <span class="bl01">{{ endorsedDate }}</span>
      </div>
    </div>

    <div ibmRow class="bx--offset-max-2 bx--offset-xlg-2 bx--offset-lg-3 mt-64">
      <div ibmCol [columnNumbers]="{ lg: 6, md: 6, sm: 6 }" class="ph03">
        Service
      </div>
    </div>
    <div
      ibmRow
      [leftGutter]="false"
      class="bx--offset-max-2 bx--offset-xlg-2 bx--offset-lg-3 mt-3"
    >
      <div
        ibmCol
        [columnNumbers]="{ lg: 12, md: 8, sm: 8 }"
        class="ph03 full-width"
      >
        <ibm-table-container>
          <div class="horizontal-overflow-table">
            <table class="bx--data-table">
              <thead>
                <tr>
                  <th rowspan="2">Item</th>
                  <th rowspan="2">No. of Operators</th>
                  <th rowspan="2">Full Tank</th>
                  <th rowspan="2">Request Qty. (L)</th>
                  <th rowspan="2">Actual Qty. In (L)</th>
                  <th rowspan="2">Actual Qty. Out (L)</th>
                  <th
                    colspan="3"
                    class="border-left"
                    style="text-align: center"
                  >
                    Session 1
                  </th>
                  <th
                    colspan="3"
                    class="border-left"
                    style="text-align: center"
                  >
                    Session 2
                  </th>
                  <th
                    colspan="3"
                    class="border-left"
                    style="text-align: center"
                  >
                    Session 3
                  </th>
                  <th
                    colspan="3"
                    class="border-left"
                    style="text-align: center"
                  >
                    Session 4
                  </th>
                  <th rowspan="2" class="border-left">Total Hours</th>
                  <th rowspan="2">Remarks</th>

                  <!-- <th
                    style="white-space: nowrap"
                    scope="col"
                    ibmTableHeadCell
                    *ngFor="let column of service.header"
                    [column]="column"
                  ></th> -->
                </tr>
                <tr>
                  <th class="border-left">Start</th>
                  <th>End</th>
                  <th>Hours</th>
                  <th class="border-left">Start</th>
                  <th>End</th>
                  <th>Hours</th>
                  <th class="border-left">Start</th>
                  <th>End</th>
                  <th>Hours</th>
                  <th class="border-left">Start</th>
                  <th>End</th>
                  <th>Hours</th>
                </tr>
              </thead>

              <tbody>
                <tr
                  ibmTableRow
                  *ngFor="let data of services; let index = index"
                  class="tr-border"
                >
                  <!-- <td>{{ data.id }}</td> -->
                  <td>{{ data.item }}</td>
                  <td>{{ data.operators }}</td>
                  <td>{{ data.full_tank }}</td>
                  <td>{{ data.qty }}</td>
                  <td>{{ data.actualQtyIn }}</td>
                  <td>{{ data.actualQtyOut }}</td>
                  <!-- <td>{{ data.session }}</td> -->
                  <td class="border-left">{{ data.sess1Start }}</td>
                  <td>{{ data.sess1End }}</td>
                  <td>{{ data.sess1Hours }}</td>
                  <td class="border-left">{{ data.sess2Start }}</td>
                  <td>{{ data.sess2End }}</td>
                  <td>{{ data.sess2Hours }}</td>
                  <td class="border-left">{{ data.sess3Start }}</td>
                  <td>{{ data.sess3End }}</td>
                  <td>{{ data.sess3Hours }}</td>
                  <td class="border-left">{{ data.sess4Start }}</td>
                  <td>{{ data.sess4End }}</td>
                  <td>{{ data.sess4Hours }}</td>
                  <td class="border-left">{{ data.totalHours }}</td>
                  <td>{{ data.remarks }}</td>
                </tr>
              </tbody>
            </table>
          </div>
        </ibm-table-container>
      </div>
    </div>

    <div
      ibmRow
      class="bx--offset-max-2 bx--offset-xlg-2 bx--offset-lg-3 mt-24"
      [leftGutter]="false"
    >
      <div ibmCol [columnNumbers]="{ lg: 12, md: 6, sm: 6 }">
        <hr />
      </div>
    </div>

    <div
      ibmRow
      class="bx--offset-max-2 bx--offset-xlg-2 bx--offset-lg-3 mt-24"
      [leftGutter]="false"
    >
      <div ibmCol [columnNumbers]="{ lg: 2, md: 2, sm: 2 }">
        <span class="ph01">Remarks</span>
      </div>
      <div ibmCol [columnNumbers]="{ lg: 14, md: 14, sm: 14 }">
        <span class="bl01">{{ remarks }}</span>
      </div>
    </div>
    <div
      ibmRow
      class="bx--offset-max-2 bx--offset-xlg-2 bx--offset-lg-3 mt-24"
      [leftGutter]="false"
    >
      <div ibmCol [columnNumbers]="{ lg: 2, md: 2, sm: 2 }">
        <span class="ph01">Completion Date</span>
      </div>
      <div ibmCol [columnNumbers]="{ lg: 14, md: 14, sm: 14 }">
        <!-- <span class="bl01">04/05/2021</span> -->
        <span class="bl01">{{ date }}</span>
      </div>
    </div>

    <div
      ibmRow
      class="bx--offset-max-2 bx--offset-xlg-2 bx--offset-lg-3 mt-64 mb-64"
    >
      <div ibmCol [columnNumbers]="{ lg: 16, md: 16, sm: 16 }">
        <button [ibmButton]="'secondary'" class="mr-24" (click)="backClicked()">
          Back
        </button>
        <button [ibmButton]="'secondary'" class="mr-24" (click)="onPrint()">
          Print
        </button>
        <button
          [ibmButton]="'primary'"
          class="mr-24"
          [disabled]="status != 'PENDING_ENDORSEMENT'"
          (click)="openEndorseModal()"
          type="button"
        >
          Endorse
        </button>
        <button
          *ngIf="status.toLowerCase().includes('endorsement')"
          (click)="openModalAmmend = true"
          type="submit"
          ibmButton="primary"
          class="btn-178"
          style="float: right"
        >
          Amend
        </button>
      </div>
    </div>

    <!-- Modal-->
    <div ibmRow>
      <div ibmCol [columnNumbers]="{ lg: 10 }">
        <ibm-modal [open]="openModal" (overlaySelected)="openModal = false">
          <ibm-modal-header (closeSelect)="openModal = false">
            <h4 ibmModalHeaderHeading>Confirmation</h4>
          </ibm-modal-header>
          <section ibmModalContent style="height: unset">
            <h4
              ibmModalContentText
              class="bx--modal-content__regular-content modal-text"
            >
              Are you sure want to endorse?<br />
            </h4>
          </section>
          <ibm-modal-footer>
            <button
              class="bx--btn bx--btn--secondary"
              (click)="openModal = false"
            >
              Back
            </button>

            <button
              type="submit"
              class="bx--btn bx--btn--primary"
              (click)="endorseJob()"
            >
              Endorse
            </button>
          </ibm-modal-footer>
        </ibm-modal>
      </div>
    </div>

    <div ibmRow class="mt-24">
      <div ibmCol [columnNumbers]="{ lg: 10 }">
        <ibm-modal
          [open]="openModalAmmend"
          (overlaySelected)="openModalAmmend = false"
        >
          <ibm-modal-header (closeSelect)="openModalAmmend = false">
            <h3 ibmModalHeaderHeading>Amendment</h3>
          </ibm-modal-header>
          <section ibmModalContent style="height: unset">
            <ibm-label ibmModalContentText>
              Description
              <textarea
                ibmTextArea
                aria-label="textarea"
                [rows]="6"
                name="ammend"
                placeholder="Descriptions here"
                (blur)="onblurAmend($event)"
                [value]="amendNotes"
                style="margin-bottom: 20px"
              ></textarea>
            </ibm-label>
          </section>
          <ibm-modal-footer>
            <button
              class="bx--btn bx--btn--secondary"
              (click)="openModalAmmend = false"
            >
              Back
            </button>

            <button
              type="submit"
              class="bx--btn bx--btn--primary"
              (click)="submitAmmend()"
            >
              Submit
            </button>
          </ibm-modal-footer>
        </ibm-modal>
      </div>
    </div>
  </div>
</div>
