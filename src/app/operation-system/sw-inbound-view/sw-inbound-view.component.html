<ibm-loading
  *ngIf="isLoading"
  [isActive]="isLoading"
  size="normal"
  [overlay]="overlay"
>
</ibm-loading>

<div ibmGrid class="bx--grid--full-width">
  <form #swInboundView="ngForm">
    <div
      id="topPartPrint"
      ibmRow
      class="bx--offset-max-2 bx--offset-lg-3 bx--offset-xlg-2 pt-32"
    >
      <div ibmCol [columnNumbers]="{ lg: 16 }">
        <ibm-breadcrumb [noTrailingSlash]="true">
          <ibm-breadcrumb-item [current]="true" href="#1">
            Operation System
          </ibm-breadcrumb-item>
          <ibm-breadcrumb-item [current]="true" href="#1">
            Schedule Waste Management
          </ibm-breadcrumb-item>
          <ibm-breadcrumb-item>
            <a
              style="text-decoration: none"
              [routerLink]="['/operation-system/sw-inbound-outbound-list']"
              >Inbound / Outbound</a
            >
          </ibm-breadcrumb-item>
          <ibm-breadcrumb-item [current]="true" href="#1">
            Request Form - Inbound
          </ibm-breadcrumb-item>
        </ibm-breadcrumb>
      </div>
    </div>

    <div class="printable">
      <div class="logon-container">
        <div
          ibmRow
          class="bx--offset-max-2 bx--offset-xlg-2 bx--offset-lg-3 justify-content-center print-logo"
        >
          <div ibmCol [columnNumbers]="{ lg: 16, md: 16, sm: 16 }">
            <img src="./assets/images/ksb-logo-97.svg" alt="KSB logo" />
          </div>
        </div>
        <div
          ibmRow
          class="bx--offset-max-2 bx--offset-xlg-2 bx--offset-lg-3 justify-content-center mt-3 print-logo"
          style="margin-bottom: 2rem"
        >
          <div ibmCol [columnNumbers]="{ lg: 16, md: 16, sm: 16 }">
            <span class="ph02"
              >PANGKALAN BEKALAN KEMAMAN SDN. BHD. (69363-D)</span
            >
          </div>
        </div>
      </div>
      <div
        ibmRow
        class="bx--offset-max-2 bx--offset-lg-3 bx--offset-xlg-2 pt-24"
      >
        <div ibmCol [columnNumbers]="{ max: 16, xlg: 16, lg: 16 }" class="ph03">
          Request Form - Inbound
        </div>
      </div>

      <div
        ibmRow
        class="bx--offset-max-2 bx--offset-lg-3 bx--offset-xlg-2 pt-24"
        [leftGutter]="false"
      >
        <div ibmCol [columnNumbers]="{ lg: 2 }" class="ph01">Company Name</div>
        <div ibmCol [columnNumbers]="{ lg: 6 }" class="bl01">
          {{ companyName }}
        </div>
      </div>

      <div
        ibmRow
        class="bx--offset-max-2 bx--offset-lg-3 bx--offset-xlg-2 pt-24"
        [leftGutter]="false"
      >
        <div ibmCol [columnNumbers]="{ lg: 2 }" class="ph01">Request By</div>
        <div ibmCol [columnNumbers]="{ lg: 6 }" class="bl01">
          {{ requestBy }}
        </div>
      </div>

      <div
        ibmRow
        class="bx--offset-max-2 bx--offset-lg-3 bx--offset-xlg-2 pt-24"
        [leftGutter]="false"
      >
        <div ibmCol [columnNumbers]="{ lg: 2 }" class="ph01">
          Services Order No.
        </div>
        <div ibmCol [columnNumbers]="{ lg: 6 }" class="bl01">
          {{ serviceOrderNo }}
        </div>
      </div>

      <div
        ibmRow
        class="bx--offset-max-2 bx--offset-lg-3 bx--offset-xlg-2 pt-24"
        [leftGutter]="false"
      >
        <div ibmCol [columnNumbers]="{ lg: 2 }" class="ph01">Booking Date</div>
        <div ibmCol [columnNumbers]="{ lg: 6 }" class="bl01">
          {{ bookingDate | date: "dd/MM/YYYY" }}
        </div>
      </div>

      <div
        ibmRow
        class="bx--offset-max-2 bx--offset-lg-3 bx--offset-xlg-2 pt-24"
        [leftGutter]="false"
      >
        <div ibmCol [columnNumbers]="{ lg: 2 }" class="ph01">
          Request on Behalf
        </div>
        <div ibmCol [columnNumbers]="{ lg: 6 }" class="bl01">
          {{ reqOnBehalf }}
        </div>
      </div>

      <div
        ibmRow
        class="bx--offset-max-2 bx--offset-lg-3 bx--offset-xlg-2 pt-24"
        [leftGutter]="false"
      >
        <div ibmCol [columnNumbers]="{ lg: 2 }" class="ph01">
          Job Description
        </div>
        <div ibmCol [columnNumbers]="{ lg: 6 }" class="bl01">
          {{ jobDesc }}
        </div>
      </div>

      <div
        ibmRow
        class="bx--offset-max-2 bx--offset-lg-3 bx--offset-xlg-2 pt-24"
        [leftGutter]="false"
      >
        <div ibmCol [columnNumbers]="{ lg: 2 }" class="ph01">Collection</div>
        <div ibmCol [columnNumbers]="{ lg: 6 }" class="bl01">
          {{ collection }}
        </div>
      </div>

      <div
        ibmRow
        class="bx--offset-max-2 bx--offset-lg-3 bx--offset-xlg-2 pt-24"
        [leftGutter]="false"
      >
        <div ibmCol [columnNumbers]="{ lg: 2 }" class="ph01">Odd Size</div>
        <div ibmCol [columnNumbers]="{ lg: 6 }" class="bl01">
          {{ oddSize }}
        </div>
      </div>

      <div
        ibmRow
        class="bx--offset-max-2 bx--offset-lg-3 bx--offset-xlg-2 pt-24"
        [leftGutter]="false"
      >
        <div ibmCol [columnNumbers]="{ lg: 2 }" class="ph01">
          Odd Size Remarks
        </div>
        <div ibmCol [columnNumbers]="{ lg: 6 }" class="bl01">
          {{ oddSizeRemarks }}
        </div>
      </div>

      <div
        ibmRow
        class="bx--offset-max-2 bx--offset-lg-3 bx--offset-xlg-2 pt-24"
        [leftGutter]="false"
      >
        <div ibmCol [columnNumbers]="{ lg: 2 }" class="ph01">PO No.</div>
        <div ibmCol [columnNumbers]="{ lg: 6 }" class="bl01">
          {{ poNo }}
        </div>
      </div>

      <div
        ibmRow
        class="bx--offset-max-2 bx--offset-lg-3 bx--offset-xlg-2 pt-24"
        [leftGutter]="false"
      >
        <div ibmCol [columnNumbers]="{ lg: 2 }" class="ph01">Remarks</div>
        <div ibmCol [columnNumbers]="{ lg: 6 }" class="bl01">
          {{ remarks }}
        </div>
      </div>

      <div
        ibmRow
        class="bx--offset-max-2 bx--offset-lg-3 bx--offset-xlg-2 pt-24"
        [leftGutter]="false"
      >
        <div ibmCol [columnNumbers]="{ lg: 2 }" class="ph01">Ref. No.</div>
        <div ibmCol [columnNumbers]="{ lg: 6 }" class="bl01">
          {{ refNo }}
        </div>
      </div>

      <div
        ibmRow
        class="bx--offset-max-2 bx--offset-lg-3 bx--offset-xlg-2 pt-24"
        [leftGutter]="false"
      >
        <div ibmCol [columnNumbers]="{ lg: 2 }" class="ph01">
          Additional Services
        </div>
        <div ibmCol [columnNumbers]="{ lg: 6 }" class="bl01">
          {{ additionalServices }}
        </div>
      </div>

      <div
        ibmRow
        class="bx--offset-max-2 bx--offset-lg-3 bx--offset-xlg-2 pt-24 page-break"
        [leftGutter]="false"
      >
        <div ibmCol [columnNumbers]="{ lg: 2 }" class="ph01">Status</div>
        <div ibmCol [columnNumbers]="{ lg: 6 }" class="bl01">
          {{ status }}
        </div>
      </div>

      <div
        ibmRow
        class="bx--offset-max-2 bx--offset-xlg-2 bx--offset-lg-3 mt-24 d-flex"
      >
        <div
          ibmCol
          class="bx--offset-lg-2"
          style="padding-top: 1rem; padding-left: 0"
        >
          <button
            ibmButton="secondary"
            size="md"
            [disabled]="isCancelDisabled"
            *ngIf="isCancelDisplay"
            (click)="open = true"
          >
            Cancel Request
          </button>
        </div>
      </div>

      <br /><br />

      <div
        ibmRow
        class="bx--offset-max-2 bx--offset-xlg-2 bx--offset-lg-3"
        [leftGutter]="false"
        [rightGutter]="false"
        style="margin-top: 1rem"
      >
        <div ibmCol [columnNumbers]="{ lg: 12 }">
          <div class="form-item width-unset">
            <ibm-table-container>
              <ibm-table-header>
                <h4 ibmTableHeaderTitle>Inbound Waste Details</h4>
                <p ibmTableHeaderDescription class="print-hide">
                  To cancel any job, select the Action checkbox and press Cancel
                  Job button on the console. Any Cancellation made less than 1
                  hour from job time will be charged.
                </p>
              </ibm-table-header>
              <ibm-table-toolbar *ngIf="checkSelected()">
                <!-- <ibm-table-toolbar-content *ngIf="!checkSelected()">
                <button
                  ibmButton="primary"
                  size="sm"
                  type="button"
                  (click)="addInboundDetailRow()"
                >
                  <span style="margin-right: 42px">Add Item</span>
                  <div class="icon-addAlt" ibmIcon="add--alt" size="20"></div>
                </button>
              </ibm-table-toolbar-content> -->
                <div class="table-action">
                  <div class="actions">
                    <div class="del">
                      <Button
                        ibmButton="primary"
                        size="sm"
                        type="button"
                        (click)="deleteWasteDetails()"
                      >
                        Cancel Job
                        <div
                          class="icon-trashCan"
                          ibmIcon="trash-can"
                          size="20"
                        ></div>
                      </Button>
                    </div>
                    <div class="cancel">
                      <button
                        ibmButton="primary"
                        size="sm"
                        type="button"
                        (click)="cancelWasteDetails()"
                      >
                        Cancel
                      </button>
                    </div>
                  </div>
                </div>
              </ibm-table-toolbar>

              <div class="horizontal-overflow-table">
                <table class="bx--data-table">
                  <thead>
                    <tr>
                      <th class="header1">No.</th>
                      <th class="header2">Waste Code</th>
                      <th class="header3">Qty.</th>
                      <th class="header4">UOM</th>
                      <th class="header5">Time</th>
                      <th class="header6">Location</th>
                      <th class="header7">Status</th>
                      <th class="header8 print-hide" *ngIf="isCancelDisplay">
                        Action
                      </th>
                    </tr>
                  </thead>

                  <tbody class="white-bg">
                    <tr
                      *ngIf="inboundWasteDetails.length === 0"
                      [ngClass]="{ 'invalid-tableRow': goodsInTableInvalid }"
                    >
                      <td align="center" colspan="9">
                        No data is entered yet. Please add new row
                      </td>
                    </tr>
                    <tr
                      *ngFor="
                        let rowDetails of inboundWasteDetails;
                        let postIndex = index
                      "
                      [ngClass]="{ 'invalid-tableRow': goodsInTableInvalid }"
                    >
                      <!-- <tr class="white-bg"> -->
                      <td>{{ postIndex + 1 }}.</td>

                      <td>{{ rowDetails.wasteCode }}</td>

                      <td class="w-130">{{ rowDetails.qty }}</td>

                      <td>{{ rowDetails.UOM }}</td>

                      <td class="w-130">{{ rowDetails.time }}</td>

                      <td>{{ rowDetails.location }}</td>

                      <td>{{ rowDetails.status }}</td>

                      <td *ngIf="isCancelDisplay" class="print-hide">
                        <ibm-checkbox
                          *ngIf="isCancelDisplay"
                          [disabled]="rowDetails.status === 'CANCELED'"
                          name="checkbox_{{ postIndex }}"
                          [(ngModel)]="rowDetails.selected"
                        >
                        </ibm-checkbox>
                      </td>
                    </tr>
                  </tbody>
                </table>
              </div>
            </ibm-table-container>
          </div>
        </div>
      </div>
    </div>
    <br /><br />

    <div ibmRow class="bx--offset-max-2 bx--offset-xlg-2 bx--offset-lg-3 pt-32">
      <div
        ibmCol
        [columnNumbers]="{ lg: 12, md: 10, sm: 5 }"
        class="d-flex-row"
        style="justify-content: flex-start"
      >
        <button
          class="mr-24"
          ibmButton="secondary"
          size="md"
          [routerLink]="['/operation-system/sw-inbound-outbound-list']"
        >
          Back
        </button>
        <button
          class="mr-24"
          ibmButton="secondary"
          size="md"
          (click)="onPrint()"
        >
          Print
        </button>
      </div>
    </div>

    <ibm-modal [open]="open" size="sm" (overlaySelected)="open = false">
      <ibm-modal-header ibmModalHeaderHeading (closeSelect)="open = false">
        <h4 style="font-weight: bold">Confirmation</h4>
      </ibm-modal-header>
      <div ibmModalContent class="bx--modal-content">
        <h4>Are you sure you want to cancel this item?</h4>
      </div>
      <br /><br />

      <ibm-modal-footer>
        <ng-container>
          <button ibmButton="secondary" (click)="open = false">Cancel</button>
          <button
            ibmButton="primary"
            (click)="onCancel()"
            [attr.modal-primary-focus]="true"
          >
            Confirm
          </button>
        </ng-container>
      </ibm-modal-footer>
    </ibm-modal>
  </form>
  <br />
  <br />
  <br />
  <br />
  <br />
  <br />
  <br />
</div>
